(()=>{"use strict";var e,t={752(){const e=window.wp.blocks,t=window.React;var o;function l(){return l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var l in o)({}).hasOwnProperty.call(o,l)&&(e[l]=o[l])}return e},l.apply(null,arguments)}var a=function(e){return t.createElement("svg",l({width:24,height:24,style:{color:"red"}},e),o||(o=t.createElement("path",{d:"M21.8 8s-.195-1.377-.795-1.984c-.76-.797-1.613-.8-2.004-.847-2.798-.203-6.996-.203-6.996-.203h-.01s-4.197 0-6.996.202c-.39.046-1.242.05-2.003.846C2.395 6.623 2.2 8 2.2 8S2 9.62 2 11.24v1.517c0 1.618.2 3.237.2 3.237s.195 1.378.795 1.985c.76.797 1.76.77 2.205.855 1.6.153 6.8.2 6.8.2s4.203-.005 7-.208c.392-.047 1.244-.05 2.005-.847.6-.607.795-1.985.795-1.985s.2-1.618.2-3.237V11.24C22 9.62 21.8 8 21.8 8M9.935 14.595v-5.62l5.403 2.82z"})))};const i=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":3,"name":"boldblocks/youtube-block","title":"YouTube Block - A better way to embed YouTube video, short, playlist","category":"media","description":"Embed YouTube videos without slowing down your site.","keywords":["youtube","video","embed","insert"],"attributes":{"url":{"type":"string","__experimentalRole":"content"},"caption":{"type":"string","source":"html","selector":"figcaption","__experimentalRole":"content"},"aspectRatio":{"type":"string","default":"","__experimentalRole":"content"},"isMaxResThumbnail":{"type":"boolean","__experimentalRole":"content"},"thumbnailFormat":{"type":"string","default":""},"customThumbnail":{"type":"string","__experimentalRole":"content"},"settings":{"type":"object"}},"supports":{"align":true,"spacing":{"margin":true},"interactivity":{"clientNavigation":true}},"textdomain":"better-youtube-embed-block","editorScript":"file:./index.js","viewScript":"file:./frontend.js","editorStyle":"file:./index.css","style":"file:./style-index.css"}'),n=window.wp.i18n,s=window.wp.blockEditor,r=window.wp.element,u=window.wp.components,c=window.ReactJSXRuntime,b=({icon:e,label:t,value:o,onChange:l,onSubmit:a,isInvalidURL:i=!1})=>{const r=(0,n.__)("Input a YouTube video URL or an ID","better-youtube-embed-block");return(0,c.jsxs)(u.Placeholder,{icon:(0,c.jsx)(s.BlockIcon,{icon:e,showColors:!0}),label:t,className:"boldblocks-youtube",instructions:r,children:[(0,c.jsxs)("form",{className:"boldblocks-youtube__form",onSubmit:a,style:{gap:"8px"},children:[(0,c.jsx)("input",{type:"text",value:o||"",className:"components-placeholder__input","aria-label":t,placeholder:r,onChange:l,style:{flex:"1 1 auto"}}),(0,c.jsx)(u.Button,{variant:"primary",type:"submit",className:"components-placeholder__submit",children:(0,n._x)("Embed","Embed button label","better-youtube-embed-block")})]}),i&&(0,c.jsx)("div",{className:"components-placeholder__error",children:(0,c.jsx)("div",{className:"components-placeholder__instructions",children:r})})]})},p=window.wp.primitives,d=(0,r.createElement)(p.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,r.createElement)(p.Path,{d:"M20.1 5.1L16.9 2 6.2 12.7l-1.3 4.4 4.5-1.3L20.1 5.1zM4 20.8h8v-1.5H4v1.5z"})),m=(0,r.createElement)(p.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},(0,r.createElement)(p.Path,{fillRule:"evenodd",clipRule:"evenodd",d:"M6 5.5h12a.5.5 0 0 1 .5.5v12a.5.5 0 0 1-.5.5H6a.5.5 0 0 1-.5-.5V6a.5.5 0 0 1 .5-.5ZM4 6a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6Zm4 10h2v-1.5H8V16Zm5 0h-2v-1.5h2V16Zm1 0h2v-1.5h-2V16Z"})),h=(0,r.createElement)(p.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,r.createElement)(p.Path,{d:"M14.5 13.8c-1.1 0-2.1.7-2.4 1.8H4V17h8.1c.3 1 1.3 1.8 2.4 1.8s2.1-.7 2.4-1.8H20v-1.5h-3.1c-.3-1-1.3-1.7-2.4-1.7zM11.9 7c-.3-1-1.3-1.8-2.4-1.8S7.4 6 7.1 7H4v1.5h3.1c.3 1 1.3 1.8 2.4 1.8s2.1-.7 2.4-1.8H20V7h-8.1z"})),g=({showEditButton:e,switchBackToURLInput:t,showFetchCaption:o,fetchCaption:l,url:a,showSettings:i,settingsLabel:r,settingsControl:b})=>(0,c.jsx)(c.Fragment,{children:(0,c.jsx)(s.BlockControls,{children:(0,c.jsxs)(u.ToolbarGroup,{children:[e&&(0,c.jsx)(u.ToolbarButton,{className:"components-toolbar__control",label:(0,n.__)("Edit URL/ID","better-youtube-embed-block"),icon:d,onClick:t}),o&&(0,c.jsx)(u.ToolbarButton,{className:"components-toolbar__control",label:(0,n.__)("Fetch the video title as the caption","better-youtube-embed-block"),icon:m,onClick:()=>l(a)}),i&&(0,c.jsx)(u.Dropdown,{popoverProps:{position:"bottom right"},contentClassName:"byeb-dropdown",renderToggle:({isOpen:e,onToggle:t})=>(0,c.jsx)(u.ToolbarButton,{label:r,onClick:t,"aria-haspopup":"true","aria-expanded":e,icon:h}),renderContent:()=>b})]})})}),y=({id:e="",isMaxResThumbnail:t=!1,thumbnailFormat:o="jpg",playLabel:l,backgroundImage:a,params:i={}})=>(a||(a=`https://img.youtube.com/${"webp"===o?"vi_webp":"vi"}/${e}/${t?"maxresdefault":"hqdefault"}.${"webp"===o?"webp":"jpg"}`),(0,c.jsx)("div",{id:`yb-video-${e}`,className:"yb-player","data-video-id":e,"data-title":l,style:{backgroundImage:`url(${a})`},...Object.keys(i).length?{"data-params":JSON.stringify(i)}:{},children:(0,c.jsx)("button",{type:"button",className:"yb-btn-play",children:(0,c.jsx)("span",{className:"visually-hidden",children:l})})})),v="figure";function x(e){var t;if(/^[a-zA-Z0-9_-]{11}$/.test(e))return e;const o=/(youtu.*be.*)\/(watch\?v=|embed\/|v|shorts|)(.*?((?=[&#?])|$))/gm.exec(e);return o&&null!==(t=o[3])&&void 0!==t?t:""}function _({aspectRatio:e}){let t={};if(e&&/^((\.\d+)|(\d+(\.\d+)?)|(\d+\/([1-9]\d*)))$/.test(e)){const o=e.split("/"),l=o.length>1?parseFloat(o[0]/o[1]):o[0];l&&!isNaN(l)&&(t={"--byeb--aspect-ratio":`${parseFloat(100/l).toFixed(2)}%`})}return t}const{name:j}=i,k={from:[{type:"block",blocks:["core/embed"],isMatch:({providerNameSlug:e})=>"youtube"===e,transform:({url:t,caption:o})=>(0,e.createBlock)(j,{url:t,caption:o})}],to:[{type:"block",blocks:["core/embed"],transform:({url:t,caption:o})=>(t=t&&11===t.length?`https://youtu.be/${t}`:t,(0,e.createBlock)("core/embed",{url:t,caption:o,providerNameSlug:"youtube",responsive:!0}))}]};(0,e.registerBlockType)(i,{icon:a,transforms:k,edit:function(e){const{attributes:{url:t="",caption:o,isMaxResThumbnail:l,thumbnailFormat:i="jpg",aspectRatio:p,customThumbnail:d,settings:m={}},isSelected:h,setAttributes:j,onFocus:k,clientId:w}=e,{multipleMode:f,videoIds:T="",playlistId:C="",loop:R=0,rel:S}=m,[B,I]=(0,r.useState)(t),M=x(t),N=x(B),[O,F]=(0,r.useState)(!1),E=!M||O,[P,$]=(0,r.useState)(!1),L=(0,r.useRef)(),[G,V]=(0,r.useState)(d?"custom":"youtube"),D=e=>{e&&(11===e.length&&(e=`https://youtu.be/${e}`),fetch(`https://www.youtube.com/oembed?format=json&url=${e}`).then(e=>!!e.ok&&e.json()).then(e=>{e&&e?.title&&j({caption:e.title})}).finally(()=>$(!1)))},H=(0,s.useBlockProps)({style:_({aspectRatio:p})}),U=s.useBlockEditingMode?(0,s.useBlockEditingMode)():"default";if(E)return(0,c.jsx)(v,{...H,children:(0,c.jsx)(b,{icon:a,label:(0,n.__)("YouTube URL or YouTube Video ID","better-youtube-embed-block"),onFocus:k,value:B,isInvalidURL:!N&&B&&B?.length>5,onSubmit:e=>{e&&e.preventDefault(),F(!1),(e=>{!o&&N&&M!==N&&($(!0),D(e)),j({url:e})})(B)},onChange:e=>{I(e.target.value)}})});const z=(0,n.__)("Media settings","better-youtube-embed-block"),Y=(0,n.__)("Custom","better-youtube-embed-block"),Z=(0,n.__)("Custom thumbnail","better-youtube-embed-block"),A=(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)(u.__experimentalToggleGroupControl,{isBlock:!0,label:(0,n.__)("Thumbnail","better-youtube-embed-block"),value:G,onChange:V,className:"byeb-multiple-mode",children:[(0,c.jsx)(u.__experimentalToggleGroupControlOption,{"aria-label":"YouTube",label:"YouTube",showTooltip:!0,value:"youtube",disabled:!!d}),(0,c.jsx)(u.__experimentalToggleGroupControlOption,{"aria-label":Y,label:Y,showTooltip:!0,value:"custom"})]}),"custom"===G?(0,c.jsx)(s.MediaUploadCheck,{children:(0,c.jsxs)(u.BaseControl,{children:[(0,c.jsx)(u.BaseControl.VisualLabel,{children:Z}),(0,c.jsx)(u.TextControl,{value:null!=d?d:"",onChange:e=>j({customThumbnail:e}),placeholder:"https://example.com/bg.jpg",autoComplete:"off",className:"custom-video-thumbnail"}),(0,c.jsx)(s.MediaUpload,{title:Z,onSelect:e=>j({customThumbnail:e.url}),allowedTypes:["image"],render:({open:e})=>(0,c.jsxs)(u.__experimentalHStack,{spacing:2,justify:"flex-start",children:[(0,c.jsx)(u.Button,{onClick:e,ref:L,variant:"secondary",size:"small",children:d?(0,n.__)("Replace image","better-youtube-embed-block"):(0,n.__)("Select image","better-youtube-embed-block")}),!!d&&(0,c.jsx)(u.Button,{onClick:()=>{j({customThumbnail:void 0}),L.current.focus()},variant:"secondary",size:"small",children:(0,n.__)("Remove image","better-youtube-embed-block")})]})})]})}):(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(u.ToggleControl,{label:(0,n.__)("Load the high-resolution image","better-youtube-embed-block"),checked:null!=l&&l,onChange:e=>j({isMaxResThumbnail:e}),help:(0,n.__)("Enable this setting only if the video has a high-resolution image.","better-youtube-embed-block"),disabled:!!d}),(0,c.jsxs)(u.__experimentalToggleGroupControl,{isBlock:!0,label:(0,n.__)("Format","better-youtube-embed-block"),value:["jpg","webp"].includes(i)?i:"jpg",onChange:e=>j({thumbnailFormat:e}),className:"byeb-multiple-mode",children:[(0,c.jsx)(u.__experimentalToggleGroupControlOption,{"aria-label":"JPG",label:"JPG",showTooltip:!0,value:"jpg",disabled:!!d}),(0,c.jsx)(u.__experimentalToggleGroupControlOption,{"aria-label":"WebP",label:"WebP",showTooltip:!0,value:"webp",disabled:!!d})]})]}),(0,c.jsx)(u.TextControl,{label:(0,n.__)("Aspect ratio","better-youtube-embed-block"),list:`${w}-aspect-ratio`,value:p,onChange:e=>j({aspectRatio:e}),placeholder:"16/9",autoComplete:"off",help:(0,n.__)("Set a custom aspect ratio for the video. Some common values are '16/9' for HD videos, '9/16' for short videos. The default value is '16/9'.","better-youtube-embed-block")}),(0,c.jsxs)("datalist",{id:`${w}-aspect-ratio`,children:[(0,c.jsx)("option",{value:"9/16"}),(0,c.jsx)("option",{value:"1"}),(0,c.jsx)("option",{value:"4/3"}),(0,c.jsx)("option",{value:"2"}),(0,c.jsx)("option",{value:"21/9"})]}),(0,c.jsxs)(u.__experimentalToggleGroupControl,{isBlock:!0,isDeselectable:!0,label:(0,n.__)("Multiple mode","better-youtube-embed-block"),value:f,onChange:e=>j({settings:{...m,multipleMode:e}}),className:"byeb-multiple-mode",children:[(0,c.jsx)(u.__experimentalToggleGroupControlOption,{"aria-label":(0,n.__)("Multiple videos","better-youtube-embed-block"),label:(0,n.__)("Multiple","better-youtube-embed-block"),showTooltip:!0,value:"multiple"}),(0,c.jsx)(u.__experimentalToggleGroupControlOption,{"aria-label":(0,n.__)("The whole playlist","better-youtube-embed-block"),label:(0,n.__)("Playlist","better-youtube-embed-block"),showTooltip:!0,value:"playlist"})]}),"multiple"===f&&(0,c.jsx)(u.TextControl,{label:(0,n.__)("Input video IDs","better-youtube-embed-block"),value:T,onChange:e=>j({settings:{...m,videoIds:e}}),help:(0,n.__)("Input a comma-separated list of video IDs","better-youtube-embed-block"),autoComplete:"off"}),"playlist"===f&&(0,c.jsx)(u.TextControl,{label:(0,n.__)("Input a playlist ID","better-youtube-embed-block"),value:C,onChange:e=>j({settings:{...m,playlistId:e}}),help:(0,n.__)("Make sure the initial video is from this playlist.","better-youtube-embed-block"),autoComplete:"off"}),(0,c.jsx)(u.ToggleControl,{label:(0,n.__)("Loop continuously","better-youtube-embed-block"),checked:1===R,onChange:e=>j({settings:{...m,loop:e?1:0}}),help:(0,n.__)("Play all other videos or the entire playlist, if any, and then start again. If there is only one video, it will play repeatedly.","better-youtube-embed-block")}),(0,c.jsx)(u.ToggleControl,{label:(0,n.__)("Show related videos from the same channel","better-youtube-embed-block"),checked:0===S,onChange:e=>j({settings:{...m,rel:e?0:1}})})]});return(0,c.jsxs)(c.Fragment,{children:[h&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(g,{showEditButton:M,switchBackToURLInput:()=>F(!0),showFetchCaption:!!x(t),url:t,fetchCaption:D,showSettings:"contentOnly"===U,settingsLabel:z,settingsControl:A}),M&&(0,c.jsx)(s.InspectorControls,{group:"settings",children:(0,c.jsx)(u.PanelBody,{title:z,initialOpen:!0,children:A})})]}),(0,c.jsx)(v,{...H,children:!E&&M&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(y,{id:M,playLabel:(0,n.__)("Play","better-youtube-embed-block"),isMaxResThumbnail:l,thumbnailFormat:i,backgroundImage:d}),P?(0,c.jsx)(u.Spinner,{}):(0,c.jsx)(s.RichText,{tagName:"figcaption",className:"yb-caption",placeholder:(0,n.__)("Add caption","better-youtube-embed-block"),value:o,onChange:e=>j({caption:e}),inlineToolbar:!0})]})})]})},save:function(e){const{attributes:{url:t,caption:o,aspectRatio:l,isMaxResThumbnail:a,thumbnailFormat:i="jpg",customThumbnail:n,settings:{multipleMode:r,videoIds:u,playlistId:b,loop:p=0,rel:d=1}={}}}=e,m=x(t),h={};return r&&("multiple"===r&&u?h.playlist=`${m},${u}`:"playlist"===r&&b&&(h.list=b)),1===p&&(h.loop=1,h?.playlist||h?.list||(h.playlist=m)),0===d&&(h.rel=0),(0,c.jsx)(v,{...s.useBlockProps.save({style:_({aspectRatio:l})}),children:m&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(y,{id:m,playLabel:"Play",isMaxResThumbnail:a,thumbnailFormat:i,backgroundImage:n,params:h}),!s.RichText.isEmpty(o)&&(0,c.jsx)(s.RichText.Content,{className:"yb-caption",tagName:"figcaption",value:o})]})})}})}},o={};function l(e){var a=o[e];if(void 0!==a)return a.exports;var i=o[e]={exports:{}};return t[e](i,i.exports,l),i.exports}l.m=t,e=[],l.O=(t,o,a,i)=>{if(!o){var n=1/0;for(c=0;c<e.length;c++){for(var[o,a,i]=e[c],s=!0,r=0;r<o.length;r++)(!1&i||n>=i)&&Object.keys(l.O).every(e=>l.O[e](o[r]))?o.splice(r--,1):(s=!1,i<n&&(n=i));if(s){e.splice(c--,1);var u=a();void 0!==u&&(t=u)}}return t}i=i||0;for(var c=e.length;c>0&&e[c-1][2]>i;c--)e[c]=e[c-1];e[c]=[o,a,i]},l.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={57:0,350:0};l.O.j=t=>0===e[t];var t=(t,o)=>{var a,i,[n,s,r]=o,u=0;if(n.some(t=>0!==e[t])){for(a in s)l.o(s,a)&&(l.m[a]=s[a]);if(r)var c=r(l)}for(t&&t(o);u<n.length;u++)i=n[u],l.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return l.O(c)},o=globalThis.webpackChunkyoutube_block=globalThis.webpackChunkyoutube_block||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))})();var a=l.O(void 0,[350],()=>l(752));a=l.O(a)})();