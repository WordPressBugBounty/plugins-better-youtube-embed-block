!function(){"use strict";var e,t={677:function(){var e,t=window.wp.blocks,l=window.React;function o(){return o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var l=arguments[t];for(var o in l)Object.prototype.hasOwnProperty.call(l,o)&&(e[o]=l[o])}return e},o.apply(this,arguments)}var a=function(t){return l.createElement("svg",o({width:24,height:24,style:{color:"red"}},t),e||(e=l.createElement("path",{d:"M21.8 8s-.195-1.377-.795-1.984c-.76-.797-1.613-.8-2.004-.847-2.798-.203-6.996-.203-6.996-.203h-.01s-4.197 0-6.996.202c-.39.046-1.242.05-2.003.846C2.395 6.623 2.2 8 2.2 8S2 9.62 2 11.24v1.517c0 1.618.2 3.237.2 3.237s.195 1.378.795 1.985c.76.797 1.76.77 2.205.855 1.6.153 6.8.2 6.8.2s4.203-.005 7-.208c.392-.047 1.244-.05 2.005-.847.6-.607.795-1.985.795-1.985s.2-1.618.2-3.237V11.24C22 9.62 21.8 8 21.8 8zM9.935 14.595v-5.62l5.403 2.82-5.403 2.8z"})))},n=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":3,"name":"boldblocks/youtube-block","title":"YouTube Block - A better way to embed YouTube video, short, playlist","category":"media","description":"Embed YouTube videos without slowing down your site.","keywords":["youtube","video","embed","insert"],"attributes":{"url":{"type":"string","__experimentalRole":"content"},"caption":{"type":"string","source":"html","selector":"figcaption","__experimentalRole":"content"},"aspectRatio":{"type":"string","default":"","__experimentalRole":"content"},"isMaxResThumbnail":{"type":"boolean","__experimentalRole":"content"},"thumbnailFormat":{"type":"string","default":""},"customThumbnail":{"type":"string","__experimentalRole":"content"},"settings":{"type":"object"}},"supports":{"align":true,"spacing":{"margin":true},"interactivity":{"clientNavigation":true}},"textdomain":"better-youtube-embed-block","editorScript":"file:./index.js","viewScript":"file:./frontend.js","editorStyle":"file:./index.css","style":"file:./style-index.css"}'),r=window.wp.element,i=window.wp.i18n,u=window.wp.blockEditor,s=window.wp.components,c=e=>{let{icon:t,label:l,value:o,onChange:a,onSubmit:n,isInvalidURL:c=!1}=e;const b=(0,i.__)("Input a YouTube video URL or an ID","better-youtube-embed-block");return(0,r.createElement)(s.Placeholder,{icon:(0,r.createElement)(u.BlockIcon,{icon:t,showColors:!0}),label:l,className:"boldblocks-youtube",instructions:b},(0,r.createElement)("form",{className:"boldblocks-youtube__form",onSubmit:n,style:{gap:"8px"}},(0,r.createElement)("input",{type:"text",value:o||"",className:"components-placeholder__input","aria-label":l,placeholder:b,onChange:a,style:{flex:"1 1 auto"}}),(0,r.createElement)(s.Button,{variant:"primary",type:"submit",className:"components-placeholder__submit"},(0,i._x)("Embed","Embed button label","better-youtube-embed-block"))),c&&(0,r.createElement)("div",{className:"components-placeholder__error"},(0,r.createElement)("div",{className:"components-placeholder__instructions"},b)))},b=window.wp.primitives,m=(0,r.createElement)(b.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,r.createElement)(b.Path,{d:"M20.1 5.1L16.9 2 6.2 12.7l-1.3 4.4 4.5-1.3L20.1 5.1zM4 20.8h8v-1.5H4v1.5z"})),p=(0,r.createElement)(b.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},(0,r.createElement)(b.Path,{fillRule:"evenodd",clipRule:"evenodd",d:"M6 5.5h12a.5.5 0 0 1 .5.5v12a.5.5 0 0 1-.5.5H6a.5.5 0 0 1-.5-.5V6a.5.5 0 0 1 .5-.5ZM4 6a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6Zm4 10h2v-1.5H8V16Zm5 0h-2v-1.5h2V16Zm1 0h2v-1.5h-2V16Z"})),d=(0,r.createElement)(b.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,r.createElement)(b.Path,{d:"M14.5 13.8c-1.1 0-2.1.7-2.4 1.8H4V17h8.1c.3 1 1.3 1.8 2.4 1.8s2.1-.7 2.4-1.8H20v-1.5h-3.1c-.3-1-1.3-1.7-2.4-1.7zM11.9 7c-.3-1-1.3-1.8-2.4-1.8S7.4 6 7.1 7H4v1.5h3.1c.3 1 1.3 1.8 2.4 1.8s2.1-.7 2.4-1.8H20V7h-8.1z"})),h=e=>{let{showEditButton:t,switchBackToURLInput:l,showFetchCaption:o,fetchCaption:a,url:n,showSettings:c,settingsLabel:b,settingsControl:h}=e;return(0,r.createElement)(r.Fragment,null,(0,r.createElement)(u.BlockControls,null,(0,r.createElement)(s.ToolbarGroup,null,t&&(0,r.createElement)(s.ToolbarButton,{className:"components-toolbar__control",label:(0,i.__)("Edit URL/ID","better-youtube-embed-block"),icon:m,onClick:l}),o&&(0,r.createElement)(s.ToolbarButton,{className:"components-toolbar__control",label:(0,i.__)("Fetch the video title as the caption","better-youtube-embed-block"),icon:p,onClick:()=>a(n)}),c&&(0,r.createElement)(s.Dropdown,{popoverProps:{position:"bottom right"},contentClassName:"byeb-dropdown",renderToggle:e=>{let{isOpen:t,onToggle:l}=e;return(0,r.createElement)(s.ToolbarButton,{label:b,onClick:l,"aria-haspopup":"true","aria-expanded":t,icon:d})},renderContent:()=>h}))))};function g(){return g=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var l=arguments[t];for(var o in l)Object.prototype.hasOwnProperty.call(l,o)&&(e[o]=l[o])}return e},g.apply(this,arguments)}var y=e=>{let{id:t="",isMaxResThumbnail:l=!1,thumbnailFormat:o="jpg",playLabel:a,backgroundImage:n,params:i={}}=e;return n||(n=`https://img.youtube.com/${"webp"===o?"vi_webp":"vi"}/${t}/${l?"maxresdefault":"hqdefault"}.${"webp"===o?"webp":"jpg"}`),(0,r.createElement)("div",g({id:`yb-video-${t}`,className:"yb-player","data-video-id":t,"data-title":a,style:{backgroundImage:`url(${n})`}},Object.keys(i).length?{"data-params":JSON.stringify(i)}:{}),(0,r.createElement)("button",{type:"button",className:"yb-btn-play"},(0,r.createElement)("span",{className:"visually-hidden"},a)))},v="figure";function _(e){var t;if(/^[a-zA-Z0-9_-]{11}$/.test(e))return e;const l=/(youtu.*be.*)\/(watch\?v=|embed\/|v|shorts|)(.*?((?=[&#?])|$))/gm.exec(e);return l&&null!==(t=l[3])&&void 0!==t?t:""}function f(e){let{aspectRatio:t}=e,l={};if(t&&/^((\.\d+)|(\d+(\.\d+)?)|(\d+\/([1-9]\d*)))$/.test(t)){const e=t.split("/"),o=e.length>1?parseFloat(e[0]/e[1]):e[0];o&&!isNaN(o)&&(l={"--byeb--aspect-ratio":`${parseFloat(100/o).toFixed(2)}%`})}return l}const{name:k}=n;var E={from:[{type:"block",blocks:["core/embed"],isMatch:e=>{let{providerNameSlug:t}=e;return"youtube"===t},transform:e=>{let{url:l,caption:o}=e;return(0,t.createBlock)(k,{url:l,caption:o})}}],to:[{type:"block",blocks:["core/embed"],transform:e=>{let{url:l,caption:o}=e;return l=l&&11===l.length?`https://youtu.be/${l}`:l,(0,t.createBlock)("core/embed",{url:l,caption:o,providerNameSlug:"youtube",responsive:!0})}}]};(0,t.registerBlockType)(n,{icon:a,transforms:E,edit:function(e){const{attributes:{url:t="",caption:l,isMaxResThumbnail:o,thumbnailFormat:n="jpg",aspectRatio:b,customThumbnail:m,settings:p={}},isSelected:d,setAttributes:g,onFocus:k,clientId:E}=e,{multipleMode:w,videoIds:C="",playlistId:T="",loop:x=0,rel:R}=p,[O,B]=(0,r.useState)(t),S=_(t),I=_(O),[M,N]=(0,r.useState)(!1),j=!S||M,[F,P]=(0,r.useState)(!1),$=(0,r.useRef)(),[L,G]=(0,r.useState)(m?"custom":"youtube"),V=e=>{e&&(11===e.length&&(e=`https://youtu.be/${e}`),fetch(`https://www.youtube.com/oembed?format=json&url=${e}`).then((e=>!!e.ok&&e.json())).then((e=>{e&&null!=e&&e.title&&g({caption:e.title})})).finally((()=>P(!1))))},D=(0,u.useBlockProps)({style:f({aspectRatio:b})}),H=u.useBlockEditingMode?(0,u.useBlockEditingMode)():"default";if(j)return(0,r.createElement)(v,D,(0,r.createElement)(c,{icon:a,label:(0,i.__)("YouTube URL or YouTube Video ID","better-youtube-embed-block"),onFocus:k,value:O,isInvalidURL:!I&&O&&(null==O?void 0:O.length)>5,onSubmit:e=>{e&&e.preventDefault(),N(!1),(e=>{!l&&I&&S!==I&&(P(!0),V(e)),g({url:e})})(O)},onChange:e=>{B(e.target.value)}}));const z=(0,i.__)("Media settings","better-youtube-embed-block"),U=(0,i.__)("Custom","better-youtube-embed-block"),Y=(0,i.__)("Custom thumbnail","better-youtube-embed-block"),Z=(0,r.createElement)(r.Fragment,null,(0,r.createElement)(s.__experimentalToggleGroupControl,{isBlock:!0,label:(0,i.__)("Thumbnail","better-youtube-embed-block"),value:L,onChange:G,className:"byeb-multiple-mode"},(0,r.createElement)(s.__experimentalToggleGroupControlOption,{"aria-label":"YouTube",label:"YouTube",showTooltip:!0,value:"youtube",disabled:!!m}),(0,r.createElement)(s.__experimentalToggleGroupControlOption,{"aria-label":U,label:U,showTooltip:!0,value:"custom"})),"custom"===L?(0,r.createElement)(u.MediaUploadCheck,null,(0,r.createElement)(s.BaseControl,null,(0,r.createElement)(s.BaseControl.VisualLabel,null,Y),(0,r.createElement)(s.TextControl,{value:null!=m?m:"",onChange:e=>g({customThumbnail:e}),placeholder:"https://example.com/bg.jpg",autoComplete:"off",className:"custom-video-thumbnail"}),(0,r.createElement)(u.MediaUpload,{title:Y,onSelect:e=>g({customThumbnail:e.url}),allowedTypes:["image"],render:e=>{let{open:t}=e;return(0,r.createElement)(s.__experimentalHStack,{spacing:2,justify:"flex-start"},(0,r.createElement)(s.Button,{onClick:t,ref:$,variant:"secondary",size:"small"},m?(0,i.__)("Replace image","better-youtube-embed-block"):(0,i.__)("Select image","better-youtube-embed-block")),!!m&&(0,r.createElement)(s.Button,{onClick:()=>{g({customThumbnail:void 0}),$.current.focus()},variant:"secondary",size:"small"},(0,i.__)("Remove image","better-youtube-embed-block")))}}))):(0,r.createElement)(r.Fragment,null,(0,r.createElement)(s.ToggleControl,{label:(0,i.__)("Load the high-resolution image","better-youtube-embed-block"),checked:null!=o&&o,onChange:e=>g({isMaxResThumbnail:e}),help:(0,i.__)("Enable this setting only if the video has a high-resolution image.","better-youtube-embed-block"),disabled:!!m}),(0,r.createElement)(s.__experimentalToggleGroupControl,{isBlock:!0,label:(0,i.__)("Format","better-youtube-embed-block"),value:["jpg","webp"].includes(n)?n:"jpg",onChange:e=>g({thumbnailFormat:e}),className:"byeb-multiple-mode"},(0,r.createElement)(s.__experimentalToggleGroupControlOption,{"aria-label":"JPG",label:"JPG",showTooltip:!0,value:"jpg",disabled:!!m}),(0,r.createElement)(s.__experimentalToggleGroupControlOption,{"aria-label":"WebP",label:"WebP",showTooltip:!0,value:"webp",disabled:!!m}))),(0,r.createElement)(s.TextControl,{label:(0,i.__)("Aspect ratio","better-youtube-embed-block"),list:`${E}-aspect-ratio`,value:b,onChange:e=>g({aspectRatio:e}),placeholder:"16/9",autoComplete:"off",help:(0,i.__)("Set a custom aspect ratio for the video. Some common values are '16/9' for HD videos, '9/16' for short videos. The default value is '16/9'.","better-youtube-embed-block")}),(0,r.createElement)("datalist",{id:`${E}-aspect-ratio`},(0,r.createElement)("option",{value:"9/16"}),(0,r.createElement)("option",{value:"1"}),(0,r.createElement)("option",{value:"4/3"}),(0,r.createElement)("option",{value:"2"}),(0,r.createElement)("option",{value:"21/9"})),(0,r.createElement)(s.__experimentalToggleGroupControl,{isBlock:!0,isDeselectable:!0,label:(0,i.__)("Multiple mode","better-youtube-embed-block"),value:w,onChange:e=>g({settings:{...p,multipleMode:e}}),className:"byeb-multiple-mode"},(0,r.createElement)(s.__experimentalToggleGroupControlOption,{"aria-label":(0,i.__)("Multiple videos","better-youtube-embed-block"),label:(0,i.__)("Multiple","better-youtube-embed-block"),showTooltip:!0,value:"multiple"}),(0,r.createElement)(s.__experimentalToggleGroupControlOption,{"aria-label":(0,i.__)("The whole playlist","better-youtube-embed-block"),label:(0,i.__)("Playlist","better-youtube-embed-block"),showTooltip:!0,value:"playlist"})),"multiple"===w&&(0,r.createElement)(s.TextControl,{label:(0,i.__)("Input video IDs","better-youtube-embed-block"),value:C,onChange:e=>g({settings:{...p,videoIds:e}}),help:(0,i.__)("Input a comma-separated list of video IDs","better-youtube-embed-block"),autoComplete:"off"}),"playlist"===w&&(0,r.createElement)(s.TextControl,{label:(0,i.__)("Input a playlist ID","better-youtube-embed-block"),value:T,onChange:e=>g({settings:{...p,playlistId:e}}),help:(0,i.__)("Make sure the initial video is from this playlist.","better-youtube-embed-block"),autoComplete:"off"}),(0,r.createElement)(s.ToggleControl,{label:(0,i.__)("Loop continuously","better-youtube-embed-block"),checked:1===x,onChange:e=>g({settings:{...p,loop:e?1:0}}),help:(0,i.__)("Play all other videos or the entire playlist, if any, and then start again. If there is only one video, it will play repeatedly.","better-youtube-embed-block")}),(0,r.createElement)(s.ToggleControl,{label:(0,i.__)("Show related videos from the same channel","better-youtube-embed-block"),checked:0===R,onChange:e=>g({settings:{...p,rel:e?0:1}})}));return(0,r.createElement)(r.Fragment,null,d&&(0,r.createElement)(r.Fragment,null,(0,r.createElement)(h,{showEditButton:S,switchBackToURLInput:()=>N(!0),showFetchCaption:!!_(t),url:t,fetchCaption:V,showSettings:"contentOnly"===H,settingsLabel:z,settingsControl:Z}),S&&(0,r.createElement)(u.InspectorControls,{group:"settings"},(0,r.createElement)(s.PanelBody,{title:z,initialOpen:!0},Z))),(0,r.createElement)(v,D,!j&&S&&(0,r.createElement)(r.Fragment,null,(0,r.createElement)(y,{id:S,playLabel:(0,i.__)("Play","better-youtube-embed-block"),isMaxResThumbnail:o,thumbnailFormat:n,backgroundImage:m}),F?(0,r.createElement)(s.Spinner,null):(0,r.createElement)(u.RichText,{tagName:"figcaption",className:"yb-caption",placeholder:(0,i.__)("Add caption","better-youtube-embed-block"),value:l,onChange:e=>g({caption:e}),inlineToolbar:!0}))))},save:function(e){const{attributes:{url:t,caption:l,aspectRatio:o,isMaxResThumbnail:a,thumbnailFormat:n="jpg",customThumbnail:i,settings:{multipleMode:s,videoIds:c,playlistId:b,loop:m=0,rel:p=1}={}}}=e,d=_(t),h={};return s&&("multiple"===s&&c?h.playlist=`${d},${c}`:"playlist"===s&&b&&(h.list=b)),1===m&&(h.loop=1,null!=h&&h.playlist||null!=h&&h.list||(h.playlist=d)),0===p&&(h.rel=0),(0,r.createElement)(v,u.useBlockProps.save({style:f({aspectRatio:o})}),d&&(0,r.createElement)(r.Fragment,null,(0,r.createElement)(y,{id:d,playLabel:"Play",isMaxResThumbnail:a,thumbnailFormat:n,backgroundImage:i,params:h}),!u.RichText.isEmpty(l)&&(0,r.createElement)(u.RichText.Content,{className:"yb-caption",tagName:"figcaption",value:l})))}})}},l={};function o(e){var a=l[e];if(void 0!==a)return a.exports;var n=l[e]={exports:{}};return t[e](n,n.exports,o),n.exports}o.m=t,e=[],o.O=function(t,l,a,n){if(!l){var r=1/0;for(c=0;c<e.length;c++){l=e[c][0],a=e[c][1],n=e[c][2];for(var i=!0,u=0;u<l.length;u++)(!1&n||r>=n)&&Object.keys(o.O).every((function(e){return o.O[e](l[u])}))?l.splice(u--,1):(i=!1,n<r&&(r=n));if(i){e.splice(c--,1);var s=a();void 0!==s&&(t=s)}}return t}n=n||0;for(var c=e.length;c>0&&e[c-1][2]>n;c--)e[c]=e[c-1];e[c]=[l,a,n]},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e={826:0,431:0};o.O.j=function(t){return 0===e[t]};var t=function(t,l){var a,n,r=l[0],i=l[1],u=l[2],s=0;if(r.some((function(t){return 0!==e[t]}))){for(a in i)o.o(i,a)&&(o.m[a]=i[a]);if(u)var c=u(o)}for(t&&t(l);s<r.length;s++)n=r[s],o.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return o.O(c)},l=self.webpackChunkyoutube_block=self.webpackChunkyoutube_block||[];l.forEach(t.bind(null,0)),l.push=t.bind(null,l.push.bind(l))}();var a=o.O(void 0,[431],(function(){return o(677)}));a=o.O(a)}();